<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainiac V7: Open Box</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div id="calib-overlay">
        <div id="calib-step">STEP 1</div>
        <div id="calib-instr">...</div>
        <div id="calib-val">Input: 0</div>
        <button class="btn-main btn-calib" style="width: 200px;" onclick="nextCalibStep()">CAPTURE & NEXT</button>
        <button class="btn-main" style="width: 200px; background: #333; margin-top: 10px;" onclick="cancelCalib()">CANCEL</button>
    </div>

    <div class="layout-grid">
        
        <div class="sidebar">
            <button id="btn-save" class="btn-main">SAVE CONFIGURATION???</button>
            <button onclick="resetCenter()" class="btn-main" style="background:#444; margin-top:5px;">RESET CENTER</button>

            <div class="group" style="border-left: 4px solid var(--arm);">
                <h3 style="color:var(--arm)">ARM 
                    <span id="arm-status" class="status-badge">IDLE</span>
                </h3>
                
                <div class="row"><span>GYRO: <span id="arm-x" class="val">0</span>, <span id="arm-y" class="val">0</span>, <span id="arm-z" class="val">0</span></span></div>
                <div class="row"><span>GRAV: <span id="arm-gx" class="val">0</span>, <span id="arm-gy" class="val">0</span>, <span id="arm-gz" class="val">0</span></span></div>

                <button class="btn-main btn-calib" onclick="startCalib('Arm')">CALIBRATION WIZARD</button>

                <div class="chk-row" style="border-color:var(--mode);">
                    <input type="checkbox" id="chk-mode-arm" onchange="updateChk('Arm', 'useRelative', this.checked)">
                    <label style="color:var(--mode);">MOUSE MODE (Speed)</label>
                </div>
                
                <div class="chk-row"><input type="checkbox" id="chk-invx-arm" onchange="updateChk('Arm', 'invX', this.checked)"><label>INVERT GLOBAL X</label></div>
                <div class="chk-row"><input type="checkbox" id="chk-invy-arm" onchange="updateChk('Arm', 'invY', this.checked)"><label>INVERT GLOBAL Y</label></div>

                <div class="chk-row"><input type="checkbox" id="chk-dyn-arm" onchange="updateChk('Arm', 'dynamic', this.checked)"><label style="color:var(--dynamic);">DYNAMIC YAW</label></div>
                <div class="chk-row"><input type="checkbox" id="chk-grav-arm" onchange="updateChk('Arm', 'gravityLock', this.checked)"><label style="color:var(--lock);">GRAVITY LOCK</label></div>

                <label>GRAVITY THRESHOLD: <span id="lbl-gt-arm">0.7</span></label>
                <input type="range" min="0" max="100" value="70" id="rng-gt-arm" oninput="updateSlider('Arm', 'gravThresh', this.value)">

                <label>SMOOTHING: <span id="lbl-sm-arm">0.2</span></label>
                <input type="range" min="1" max="100" value="20" id="rng-sm-arm" oninput="updateSlider('Arm', 'smooth', this.value)">

                <label>GYRO MAPPING</label>
                <div class="map-grid">
                    <div class="map-btn" id="btn-x-x-arm" onclick="cycleMap('Arm', 'x', 'x')">X->X</div>
                    <div class="map-btn" id="btn-x-y-arm" onclick="cycleMap('Arm', 'x', 'y')">Y->X</div>
                    <div class="map-btn" id="btn-x-z-arm" onclick="cycleMap('Arm', 'x', 'z')">Z->X</div>
                    <div class="map-btn" id="btn-y-x-arm" onclick="cycleMap('Arm', 'y', 'x')">X->Y</div>
                    <div class="map-btn" id="btn-y-y-arm" onclick="cycleMap('Arm', 'y', 'y')">Y->Y</div>
                    <div class="map-btn" id="btn-y-z-arm" onclick="cycleMap('Arm', 'y', 'z')">Z->Y</div>
                </div>
                <label>GYRO SCALE: <span id="lbl-sg-arm">15</span></label>
                <input type="range" min="1" max="100" value="15" id="rng-sg-arm" oninput="updateSlider('Arm', 'gyroScale', this.value)">

                <label style="margin-top:10px; color:#ff9800;">ACCEL MAPPING</label>
                <div class="map-grid">
                    <div class="map-btn" id="btn-x-lax-arm" onclick="cycleMap('Arm', 'x', 'lax')">X->X</div>
                    <div class="map-btn" id="btn-x-lay-arm" onclick="cycleMap('Arm', 'x', 'lay')">Y->X</div>
                    <div class="map-btn" id="btn-x-laz-arm" onclick="cycleMap('Arm', 'x', 'laz')">Z->X</div>
                    <div class="map-btn" id="btn-y-lax-arm" onclick="cycleMap('Arm', 'y', 'lax')">X->Y</div>
                    <div class="map-btn" id="btn-y-lay-arm" onclick="cycleMap('Arm', 'y', 'lay')">Y->Y</div>
                    <div class="map-btn" id="btn-y-laz-arm" onclick="cycleMap('Arm', 'y', 'laz')">Z->Y</div>
                </div>
                <label>ACCEL SCALE: <span id="lbl-sa-arm">5</span></label>
                <input type="range" min="1" max="50" value="5" id="rng-sa-arm" oninput="updateSlider('Arm', 'accelScale', this.value)">
            </div>

            <div class="group" style="border-left: 4px solid var(--glove);">
                <h3 style="color:var(--glove)">GLOVE 
                    <span id="glove-status" class="status-badge">OFFLINE</span>
                </h3>
                
                <div class="row"><span>GYRO: <span id="glove-x" class="val">0</span>, <span id="glove-y" class="val">0</span>, <span id="glove-z" class="val">0</span></span></div>
                <button class="btn-main btn-calib" onclick="startCalib('Glove')">CALIBRATION WIZARD</button>

                <div class="chk-row" style="border-color:var(--mode);">
                    <input type="checkbox" id="chk-mode-glove" onchange="updateChk('Glove', 'useRelative', this.checked)">
                    <label style="color:var(--mode);">MOUSE MODE (Speed)</label>
                </div>
                <div class="chk-row"><input type="checkbox" id="chk-invx-glove" onchange="updateChk('Glove', 'invX', this.checked)"><label>INVERT GLOBAL X</label></div>
                <div class="chk-row"><input type="checkbox" id="chk-invy-glove" onchange="updateChk('Glove', 'invY', this.checked)"><label>INVERT GLOBAL Y</label></div>

                <div class="chk-row"><input type="checkbox" id="chk-dyn-glove" onchange="updateChk('Glove', 'dynamic', this.checked)"><label style="color:var(--dynamic);">DYNAMIC YAW</label></div>
                <div class="chk-row"><input type="checkbox" id="chk-grav-glove" onchange="updateChk('Glove', 'gravityLock', this.checked)"><label style="color:var(--lock);">GRAVITY LOCK</label></div>

                <label>THRESHOLD: <span id="lbl-gt-glove">0.7</span></label>
                <input type="range" min="0" max="100" value="70" id="rng-gt-glove" oninput="updateSlider('Glove', 'gravThresh', this.value)">

                <label>SMOOTHING: <span id="lbl-sm-glove">0.2</span></label>
                <input type="range" min="1" max="100" value="20" id="rng-sm-glove" oninput="updateSlider('Glove', 'smooth', this.value)">

                <label>GYRO MAPPING</label>
                <div class="map-grid">
                    <div class="map-btn" id="btn-x-x-glove" onclick="cycleMap('Glove', 'x', 'x')">X->X</div>
                    <div class="map-btn" id="btn-x-y-glove" onclick="cycleMap('Glove', 'x', 'y')">Y->X</div>
                    <div class="map-btn" id="btn-x-z-glove" onclick="cycleMap('Glove', 'x', 'z')">Z->X</div>
                    <div class="map-btn" id="btn-y-x-glove" onclick="cycleMap('Glove', 'y', 'x')">X->Y</div>
                    <div class="map-btn" id="btn-y-y-glove" onclick="cycleMap('Glove', 'y', 'y')">Y->Y</div>
                    <div class="map-btn" id="btn-y-z-glove" onclick="cycleMap('Glove', 'y', 'z')">Z->Y</div>
                </div>
                <label>SCALE: <span id="lbl-sg-glove">15</span></label>
                <input type="range" min="1" max="100" value="15" id="rng-sg-glove" oninput="updateSlider('Glove', 'gyroScale', this.value)">

                <label style="margin-top:10px; color:#ff9800;">ACCEL MAPPING</label>
                <div class="map-grid">
                    <div class="map-btn" id="btn-x-lax-glove" onclick="cycleMap('Glove', 'x', 'lax')">X->X</div>
                    <div class="map-btn" id="btn-x-lay-glove" onclick="cycleMap('Glove', 'x', 'lay')">Y->X</div>
                    <div class="map-btn" id="btn-x-laz-glove" onclick="cycleMap('Glove', 'x', 'laz')">Z->X</div>
                    <div class="map-btn" id="btn-y-lax-glove" onclick="cycleMap('Glove', 'y', 'lax')">X->Y</div>
                    <div class="map-btn" id="btn-y-lay-glove" onclick="cycleMap('Glove', 'y', 'lay')">Y->Y</div>
                    <div class="map-btn" id="btn-y-laz-glove" onclick="cycleMap('Glove', 'y', 'laz')">Z->Y</div>
                </div>
                <label>ACCEL SCALE: <span id="lbl-sa-glove">5</span></label>
                <input type="range" min="1" max="50" value="5" id="rng-sa-glove" oninput="updateSlider('Glove', 'accelScale', this.value)">
            </div>
        </div>

        <div class="arena-container">
            <div class="arena" id="arena">
                <div id="cursor-arm" class="cursor">A</div>
                <div id="cursor-glove" class="cursor">G</div>
            </div>
        </div>

    </div>

    <script src="js/script.js"></script>
</body>
</html>